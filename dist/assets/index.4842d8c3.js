import{p as M,A as N,V as d,a as R,b as P,N as A,c as E,M as L,F,l as U,f as J,d as O,e as j,g as V,h as H,i as K,j as z,k as q,m as B,n as G,o as W,q as X,r as Y,s as Z,t as Q,u as m}from"./vendor.bab872fd.js";const tt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}};tt();var et="data:image/png;base64,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",at=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-navbar",{attrs:{toggleable:"xl",type:"dark",variant:t.variant}},[e("b-navbar-brand",{attrs:{href:"/"}},[e("img",{attrs:{id:"brandimg",alt:"Home",src:et,height:"96",width:"96"}})]),t.user.loggedIn?e("b-nav",{staticClass:"ml-auto"},[e("b-nav-item",{attrs:{title:"Click to view a random saved track"},on:{click:t.randomTrack}},[e("label",{staticClass:"sr-only"},[t._v("Click to view a random saved track")]),e("font-awesome-icon",{attrs:{icon:"dice","aria-hidden":"true"}})],1),e("b-nav-item-dropdown",{attrs:{right:""}},[e("template",{slot:"button-content"},[e("label",{staticClass:"sr-only"},[t._v("User menu dropdown toggle")]),e("font-awesome-icon",{attrs:{icon:"user","aria-hidden":"true",title:"User menu dropdown toggle"}})],1),e("b-dropdown-item",{attrs:{href:t.user.username}},[e("strong",[t._v(t._s(t.user.username))])]),e("b-dropdown-item",{attrs:{href:"/settings/"}},[e("span",[e("font-awesome-icon",{attrs:{icon:"cog"}})],1),t._v(" Settings")]),e("b-dropdown-item",{on:{click:t.toggleDarkMode}},[e("div",{staticClass:"custom-control custom-switch"},[e("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch1"},domProps:{checked:t.mode}}),e("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch1"}},[e("span",[e("font-awesome-icon",{attrs:{icon:"moon"}})],1),t._v(" Dark Mode")])])]),e("b-dropdown-divider"),e("b-dropdown-item",{attrs:{href:"/logout/"}},[t._v("Sign Out")])],2)],1):e("div",{staticClass:"ml-auto"},[e("a",{staticClass:"btn btn-secondary navbar-btn mr-1",attrs:{href:"/login/"}},[t._v("Sign In")]),e("a",{staticClass:"btn btn-success navbar-btn",attrs:{href:"/register/"}},[t._v("Register")])])],1)},rt=[];function o(t,a,e,r,s,n,c,x){var i=typeof t=="function"?t.options:t;a&&(i.render=a,i.staticRenderFns=e,i._compiled=!0),r&&(i.functional=!0),n&&(i._scopeId="data-v-"+n);var u;if(c?(u=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(l=__VUE_SSR_CONTEXT__),s&&s.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(c)},i._ssrRegister=u):s&&(u=x?function(){s.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:s),u)if(i.functional){i._injectStyles=u;var $=i.render;i.render=function(S,f){return u.call(f),$(S,f)}}else{var h=i.beforeCreate;i.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:i}}const st={data(){return{}},props:["user","mode"],computed:{variant(){return this.mode?"dark":"primary"}},methods:{toggleDarkMode(){this.$emit("darkMode")},randomTrack(){this.$emit("random")}}},v={};var nt=o(st,at,rt,!1,it,null,null,null);function it(t){for(let a in v)this[a]=v[a]}var ot=function(){return nt.exports}(),lt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"jumbotron"},[e("div",{staticClass:"container"},[e("form",{attrs:{id:"track-input"},on:{submit:function(r){return r.preventDefault(),t.getTrackInfo.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[t._m(0),e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:["fab","soundcloud"]}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.trackURL,expression:"trackURL"}],staticClass:"form-control has-feedback",attrs:{id:"url-input",type:"url","aria-label":"SoundCloud\xAE Track URL",placeholder:"https://soundcloud.com/..."},domProps:{value:t.trackURL},on:{input:function(r){r.target.composing||(t.trackURL=r.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"form-control-feedback",attrs:{type:"reset","aria-label":"Clear input"}},[e("font-awesome-icon",{attrs:{icon:"times"}})],1)])])])])])])},ct=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"url-input"}},[e("h3",[t._v("Enter a track link below to get started")])])}];const ut={data(){return{trackURL:""}},methods:{getTrackInfo(){this.$router.push(this.trackURL)}}},p={};var dt=o(ut,lt,ct,!1,ht,"1f04634e",null,null);function ht(t){for(let a in p)this[a]=p[a]}var ft=function(){return dt.exports}(),mt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"nav-container"},[e("ul",{staticClass:"nav"},[e("li",{staticClass:"nav-item"},[e("button",{staticClass:"btn nav-link",class:{active:t.isCurrentPanel(1)},attrs:{tabindex:"0",title:"View the current track's description"},on:{click:function(r){return t.setPanel(1)}}},[e("font-awesome-icon",{attrs:{icon:"stream"}}),t._v(" "),e("span",{staticClass:"d-none d-sm-inline-block",attrs:{id:"desc-label"}},[t._v("Description")])],1)]),e("li",{directives:[{name:"show",rawName:"v-show",value:t.user.loggedIn,expression:"user.loggedIn"}],staticClass:"nav-item"},[e("button",{staticClass:"btn nav-link",class:{active:t.isCurrentPanel(2)},attrs:{tabindex:"0",title:"View all your saved tracks"},on:{click:function(r){return t.setPanel(2)}}},[e("font-awesome-icon",{attrs:{icon:"music"}}),t._v(" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v("Tracks")]),t._v(" "),e("span",{staticClass:"badge badge-pill badge-light"},[t._v(t._s(t.numTracks.all))])],1)]),e("li",{directives:[{name:"show",rawName:"v-show",value:t.user.loggedIn,expression:"user.loggedIn"}],staticClass:"nav-item"},[e("button",{staticClass:"btn nav-link",class:{active:t.isCurrentPanel(3)},attrs:{tabindex:"0",title:"View all your favorited tracks"},on:{click:function(r){return t.setPanel(3)}}},[e("font-awesome-icon",{attrs:{icon:"star"}}),t._v(" "),e("span",{staticClass:"d-none d-sm-inline-block",attrs:{id:"fav-label"}},[t._v("Favorites")]),t._v(" "),e("span",{staticClass:"badge badge-pill badge-light"},[t._v(t._s(t.numTracks.favorites))])],1)])])])},vt=[];const pt={data(){return{}},props:["value","numTracks","user"],methods:{setPanel(t){this.$emit("input",t)},isCurrentPanel(t){return this.value==t}}},_={};var _t=o(pt,mt,vt,!1,kt,"68aad29c",null,null);function kt(t){for(let a in _)this[a]=_[a]}var gt=function(){return _t.exports}(),bt="/assets/placeholder.21b79c6c.png",wt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-modal",{ref:"modal",attrs:{static:"",lazy:"","ok-title":"Add",title:"Add Track"},on:{shown:t.refreshData,ok:t.submitTrack}},[e("form",[e("div",{staticClass:"form-group"},[e("label",[t._v("Title")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitInfo.title,expression:"submitInfo.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.submitInfo.title},on:{input:function(r){r.target.composing||t.$set(t.submitInfo,"title",r.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Artist")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitInfo.artist,expression:"submitInfo.artist"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.submitInfo.artist},on:{input:function(r){r.target.composing||t.$set(t.submitInfo,"artist",r.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Release Date")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitInfo.releaseDate,expression:"submitInfo.releaseDate"}],staticClass:"form-control",attrs:{type:"date",placeholder:"YYYY-MM-DD"},domProps:{value:t.submitInfo.releaseDate},on:{input:function(r){r.target.composing||t.$set(t.submitInfo,"releaseDate",r.target.value)}}})]),e("div",[t.submitInfo.isFavorite?e("button",{staticClass:"btn btn-primary",attrs:{title:"Click to unfavorite this track"},on:{click:function(r){return r.preventDefault(),t.updateFavorite(!1)}}},[e("span",[e("font-awesome-icon",{attrs:{icon:"star"}})],1),t._v(" Favorite")]):e("button",{staticClass:"btn btn-default",attrs:{title:"Click to favorite this track"},on:{click:function(r){return r.preventDefault(),t.updateFavorite(!0)}}},[e("span",[e("font-awesome-icon",{attrs:{icon:["far","star"]}})],1),t._v(" Favorite")])])])])},Ct=[];const Dt={data(){return{submitInfo:{}}},props:["trackInfo","user"],computed:{releaseDate(){if(!!this.trackInfo.release_year)return new Date(this.trackInfo.release_year,this.trackInfo.release_month-1,this.trackInfo.release_day)}},methods:{submitTrack(){if(this.submitInfo.releaseDate){const t=this.submitInfo.releaseDate.split("-"),a=new Date(this.submitInfo.releaseDate);a.setFullYear(t[0]),a.setMonth(t[1]-1),a.setDate(t[2]),a.setHours(0),this.submitInfo.releaseDate=a.toJSON()}this.axios.post(`/api/${this.user.username}/add`,this.submitInfo,{credentials:"same-origin"}).then(t=>this.$parent.$emit("update",t.data)).catch(t=>this.$parent.$emit("error","Error adding track",t))},updateFavorite(t){this.submitInfo.isFavorite=t},showModal(){this.$refs.modal.show()},refreshData(){this.submitInfo={isFavorite:!1,title:this.trackInfo.title,artist:this.trackInfo.user.username,trackID:this.trackInfo.id,releaseDate:this.releaseDate?this.releaseDate.toJSON().split("T")[0]:""}}}},k={};var It=o(Dt,wt,Ct,!1,Tt,null,null,null);function Tt(t){for(let a in k)this[a]=k[a]}var yt=function(){return It.exports}(),xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.rawData&&t.rawData.error?e("div",{staticClass:"container"},[e("h4",{staticClass:"text-danger"},[t._v(t._s(t.rawData.error))])]):t.rawData.title?e("div",{staticClass:"container"},[e("b-alert",{attrs:{variant:"success",show:!t.user.loggedIn,dismissible:""}},[e("a",{staticClass:"alert-link",attrs:{href:"/login/?hash="+t.rawData.id}},[t._v("Sign in")]),t._v(" or "),e("a",{staticClass:"alert-link",attrs:{href:"/register/?hash="+t.rawData.id}},[t._v("create an account")]),t._v(" to save this track for later! ")]),e("div",{staticClass:"row",attrs:{id:"trackTitle"}},[e("div",{staticClass:"col-md-10 order-md-2 mb-2"},[e("h3",[t._v(t._s(t.rawData.title))]),e("h4",[t._v("by "),e("a",{attrs:{href:t.rawData.user.permalink_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.rawData.user.username))])]),e("h6",[e("span",{staticClass:"text-success"},[t._v(t._s(t._f("duration")(t.rawData.duration)))])]),e("p",[t.rawData.downloadable?e("a",{attrs:{href:t._f("clientID")(t.rawData.download_url),target:"_blank",rel:"noreferrer noopener"}},[t._v("Download")]):t._e(),t.rawData.downloadable&&t.rawData.purchase_url?e("span",[t._v(" | ")]):t._e(),t.rawData.purchase_url?e("a",{attrs:{href:t.rawData.purchase_url,target:"_blank",rel:"noreferrer noopener"}},[t._v(t._s(t.rawData.purchase_title||"Buy"))]):t._e()]),t.tags.length>0&&t.tags[0]!==""?e("span",[t._v("Tags:")]):t._e(),t._l(t.tags,function(r){return e("span",{staticClass:"badge badge-primary ml-1"},[t._v(t._s(r))])})],2),e("div",{staticClass:"col-md-2 order-md-1"},[e("a",{staticClass:"artwork-link",attrs:{href:t.artworkUrl,target:"_blank",rel:"noreferrer noopener"}},[e("img",{staticClass:"img-fluid",attrs:{src:t.artworkUrl,alt:"Album Artwork"}})])])]),e("hr"),t._l(t.html,function(r){return e("p",{domProps:{innerHTML:t._s(r)}})}),e("h6",[t._v("POSTED ON: "+t._s(t._f("date")(t.datePosted)))]),t.user.loggedIn?e("div",[t.savedIds.includes(t.rawData.id.toString())?e("button",{staticClass:"btn btn-secondary",attrs:{disabled:""}},[e("span",[e("font-awesome-icon",{attrs:{icon:"check"}})],1),t._v(" Track Added To List")]):e("button",{staticClass:"btn btn-success",on:{click:function(r){return t.$refs.addTrack.showModal()}}},[t._v("+ Add Track To List")])]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("button",{staticClass:"btn btn-link",on:{click:t.toggleJSON}},[t._v("Raw Track Info")])]),e("div",{staticClass:"col d-flex justify-content-end"},[e("a",{attrs:{href:t.rawData.permalink_url,target:"_blank",rel:"noreferrer noopener"}},[e("img",{staticClass:"sc-icon",attrs:{alt:"Soundcloud Logo",title:"Click to listen to this song on SoundCloud",src:"https://developers.soundcloud.com/assets/logo_black-8c4cb46bf63fda8936f9a4d967416dc6.png"}})])])]),t.showJSON?e("pre",[e("code",[t._v(t._s(t.rawData))])]):t._e(),e("add-track-modal",{ref:"addTrack",attrs:{"track-info":t.rawData,user:t.user}})],2):e("div",{staticClass:"container"},[e("br"),e("h4",{staticClass:"text-info text-center"},[t._v("Enter a URL "),e("strong",[t._v("above")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.user.loggedIn,expression:"user.loggedIn"}]},[t._v("or select a track from the "),e("strong",[t._v("Tracks")]),t._v(" or "),e("strong",[t._v("Favorites")]),t._v(" tab")]),t._v(" to view its description.")])])},$t=[];const St={data(){return{showJSON:!1,placeholder:bt}},props:["rawData","user","savedIds"],components:{AddTrackModal:yt},methods:{toggleJSON(){this.showJSON=!this.showJSON}},filters:{duration(t){if(!t)return"";const a=[" hour"," minute"," second"],e=M(t),r=[e.hours>0?e.hours:"",e.minutes,e.seconds];return r.forEach((s,n,c)=>c[n]+=s===""?"":s===1?a[n]:a[n]+"s"),r.join(" ").trim()},clientID(t){return t?`${t}${t.includes("?")?"&":"?"}client_id=30cba84d4693746b0a2fbc0649b2e42c`:""}},computed:{datePosted(){return this.rawData.created_at?new Date(this.rawData.created_at):void 0},artworkUrl(){return this.rawData.artwork_url?this.rawData.artwork_url.replace("large","t500x500"):this.placeholder},html(){if(!this.rawData.description)return"";let t=this.rawData.description.split(`
`);return t.forEach((a,e,r)=>{a===""?r[e]="<br>":r[e]=N.link(a,{mention:"soundcloud"})}),t},tags(){if(!this.rawData.tag_list)return[];let t=this.rawData.tag_list.split(" "),a=[];for(var e=0;e<t.length;e++){var r=t[e];if(r.includes('"')){do r=r+" "+t[e+1],e++;while(!t[e].includes('"'));r=r.slice(1,-1)}a.push(r)}return a}}},g={};var Mt=o(St,xt,$t,!1,Nt,null,null,null);function Nt(t){for(let a in g)this[a]=g[a]}var Rt=function(){return Mt.exports}(),Pt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-modal",{ref:"modal",attrs:{static:"",lazy:"","ok-title":"Save",title:"Edit Track"},on:{shown:t.refreshData,ok:t.updateTrack}},[e("form",[e("div",{staticClass:"form-group"},[e("label",[t._v("Title")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitInfo.title,expression:"submitInfo.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.submitInfo.title},on:{input:function(r){r.target.composing||t.$set(t.submitInfo,"title",r.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Artist")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitInfo.artist,expression:"submitInfo.artist"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.submitInfo.artist},on:{input:function(r){r.target.composing||t.$set(t.submitInfo,"artist",r.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("Release Date")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.submitInfo.releaseDate,expression:"submitInfo.releaseDate"}],staticClass:"form-control",attrs:{type:"date",placeholder:"YYYY-MM-DD"},domProps:{value:t.submitInfo.releaseDate},on:{input:function(r){r.target.composing||t.$set(t.submitInfo,"releaseDate",r.target.value)}}})]),e("div",[t.submitInfo.isFavorite?t._e():e("button",{staticClass:"btn btn-default",attrs:{title:"Click to favorite this track"},on:{click:function(r){return r.preventDefault(),t.updateFavorite(!0)}}},[e("span",[e("font-awesome-icon",{attrs:{icon:["far","star"]}})],1),t._v(" Favorite")]),t.submitInfo.isFavorite?e("button",{staticClass:"btn btn-primary",attrs:{title:"Click to unfavorite this track"},on:{click:function(r){return r.preventDefault(),t.updateFavorite(!1)}}},[e("span",[e("font-awesome-icon",{attrs:{icon:"star"}})],1),t._v(" Favorite")]):t._e()]),e("br"),e("button",{staticClass:"btn btn-danger btn-block",on:{click:function(r){return t.deleteTrack()}}},[t._v("Delete Track")])])])},At=[];const Et={data(){return{submitInfo:{}}},props:["trackInfo","user"],computed:{releaseDate(){if(!!this.trackInfo.release_year)return new Date(this.trackInfo.release_year,this.trackInfo.release_month-1,this.trackInfo.release_day)}},methods:{updateTrack(){if(this.submitInfo.releaseDate){const t=this.submitInfo.releaseDate.split("-"),a=new Date(this.submitInfo.releaseDate);a.setFullYear(t[0]),a.setMonth(t[1]-1),a.setDate(t[2]),a.setHours(0),this.submitInfo.releaseDate=a.toJSON()}this.axios.post(`/api/${this.user.username}/edit`,this.submitInfo,{credentials:"same-origin"}).then(t=>this.$parent.$emit("update",t.data)).catch(t=>this.$parent.$emit("error","Error updating track",t))},deleteTrack(){const t={trackID:this.submitInfo.trackID};this.axios.post(`/api/${this.user.username}/remove`,t,{credentials:"same-origin"}).then(a=>this.$parent.$emit("update",a.data)).catch(a=>this.$parent.$emit("error","Error deleting track",a)),this.$refs.modal.hide()},updateFavorite(t){this.submitInfo.isFavorite=t},showModal(){this.$refs.modal.show()},refreshData(){this.submitInfo=Object.assign({},this.trackInfo);const t=new Date(this.trackInfo.releaseDate);t.setHours(0),this.submitInfo.releaseDate=this.trackInfo.releaseDate?t.toJSON().split("T")[0]:""}}},b={};var Lt=o(Et,Pt,At,!1,Ft,null,null,null);function Ft(t){for(let a in b)this[a]=b[a]}var Ut=function(){return Lt.exports}(),Jt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[e("label",{staticClass:"sr-only",attrs:{for:"search"}},[t._v("Search your saved tracks")]),e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("font-awesome-icon",{attrs:{icon:"search"}})],1)]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control has-feedback",attrs:{id:"search"},domProps:{value:t.searchTerm},on:{input:function(r){r.target.composing||(t.searchTerm=r.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"form-control-feedback",attrs:{"aria-hidden":"true",type:"reset"},on:{click:function(r){t.searchTerm=""}}},[e("font-awesome-icon",{attrs:{icon:"times"}})],1)])]),t.filteredTracks.length?e("ul",{staticClass:"grid-container"},t._l(t.filteredTracks,function(r){return e("li",{key:r.trackID,staticClass:"track-box",class:{active:t.isCurrentTrack(r.trackID)},attrs:{id:r.trackID}},[t.isCurrentTrack(r.trackID)?e("h3",{attrs:{title:"This track is already selected, view it in the Description tab"}},[t._v(t._s(r.title))]):e("h3",[e("router-link",{attrs:{to:r.trackID}},[t._v(t._s(r.title))])],1),e("h5",[t._v(t._s(r.artist))]),e("p",[t._v(t._s(t._f("date")(r.releaseDate)))]),e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(s){return t.editTrack(r)}}},[e("span",[e("font-awesome-icon",{attrs:{icon:"pencil-alt"}})],1),t._v(" Edit Info")])])}),0):e("h4",{staticClass:"text-info mt-3"},[t._v("No results")]),e("edit-track-modal",{ref:"editTrack",attrs:{"track-info":t.submitInfo,user:t.user}})],1)},Ot=[];const jt={data(){return{tracks:[],submitInfo:{},searchTerm:""}},props:["user","showFavs","currentId"],components:{EditTrackModal:Ut},computed:{numTracks(){return this.tracks.length},favTracks(){return this.tracks.filter(t=>t.isFavorite)},favTrackNum(){return this.favTracks.length},filteredTracks(){const t=this.searchTerm.toLowerCase();return(this.showFavs?this.favTracks:this.tracks).filter(e=>e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t))},trackIDs(){return this.tracks.map(t=>t.trackID)}},methods:{getTracks(){this.axios(`/api/${this.user.username}`,{credentials:"same-origin"}).then(t=>this.tracks=t.data.tracks).then(()=>this.$emit("tracks",this.numTracks,this.favTrackNum,this.trackIDs)).catch(t=>this.$emit("error","Error loading tracks",t))},receiveTracks(t){this.tracks=t,this.$emit("tracks",this.numTracks,this.favTrackNum,this.trackIDs)},editTrack(t){this.submitInfo=t,this.$refs.editTrack.showModal()},scrollToId(t){const a=document.getElementById(t);a&&a.scrollIntoView(!0)},isCurrentTrack(t){return this.currentId==t}},mounted(){this.getTracks()}},w={};var Vt=o(jt,Jt,Ot,!1,Ht,"56a7abc2",null,null);function Ht(t){for(let a in w)this[a]=w[a]}var Kt=function(){return Vt.exports}(),zt="/assets/apple-touch-icon-152x152.1b013873.png",qt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.trackInfo.title?e("b-alert",{attrs:{dismissible:"",id:"resume",show:t.visible},on:{dismissed:function(r){t.hide=!0}}},[e("h6",{staticClass:"text-muted",attrs:{id:"resume-header"}},[t._v("LAST OPENED TRACK")]),e("hr",{attrs:{id:"resume-divider"}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4 col-sm-auto"},[e("router-link",{attrs:{to:t.user.resumeTrack}},[e("img",{staticClass:"img-fluid",attrs:{alt:"Album Artwork",id:"resume-img",src:t.artworkURL}})])],1),e("div",{staticClass:"col-8 col-sm"},[e("router-link",{attrs:{to:t.user.resumeTrack}},[e("h5",[t._v(t._s(t.trackInfo.title))])]),e("h6",[t._v(t._s(t.trackInfo.user.username))])],1)])]):t._e()},Bt=[];const Gt={data(){return{trackInfo:{},hide:!1}},props:["user","isVisible"],computed:{artworkURL(){if(this.trackInfo){if(!this.trackInfo.artwork_url)return zt}else return"";return this.trackInfo.artwork_url.replace("large","t300x300")},visible(){return this.isVisible&&!this.hide}},methods:{getTrackInfo(){const t=`https://api.soundcloud.com/tracks/${this.user.resumeTrack}`;this.axios(t,{headers:{Authorization:`Bearer ${this.user.token}`}}).then(a=>this.trackInfo=a.data).catch(()=>this.hide=!0)}},mounted(){this.getTrackInfo()}},C={};var Wt=o(Gt,qt,Bt,!1,Xt,"1f674e2e",null,null);function Xt(t){for(let a in C)this[a]=C[a]}var Yt=function(){return Wt.exports}(),Zt=function(){var t=this,a=t.$createElement;return t._self._c,t._m(0)},Qt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"loading-background"},[e("div",{staticClass:"loading"},[e("div",{staticClass:"line"}),e("div",{staticClass:"line"}),e("div",{staticClass:"line"})])])}];const te={data(){return{}}},D={};var ee=o(te,Zt,Qt,!1,ae,"77e3296f",null,null);function ae(t){for(let a in D)this[a]=D[a]}var re=function(){return ee.exports}(),se=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-modal",{ref:"modal",attrs:{static:"",lazy:"","ok-only":"","ok-variant":"danger","ok-title":"Dismiss","header-text-variant":"danger",title:t.error.title}},[e("h6",[t._v(t._s(this.error.message))])])},ne=[];const ie={data(){return{}},props:["error"],methods:{showModal(){this.$refs.modal.show()}}},I={};var oe=o(ie,se,ne,!1,le,null,null,null);function le(t){for(let a in I)this[a]=I[a]}var ce=function(){return oe.exports}(),ue=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:{"dark-mode":t.darkMode},attrs:{id:"top"}},[e("navbar",{attrs:{user:t.user,mode:t.darkMode},on:{darkMode:t.toggleDarkMode,random:t.randomTrack}}),e("url-input",{on:{update:t.updateData}}),e("navpills",{attrs:{"num-tracks":t.numTracks,user:t.user},model:{value:t.currentPanel,callback:function(r){t.currentPanel=r},expression:"currentPanel"}}),e("description",{directives:[{name:"show",rawName:"v-show",value:t.isCurrentPanel(1),expression:"isCurrentPanel(1)"}],attrs:{"raw-data":t.trackData,user:t.user,"saved-ids":t.savedIDs},on:{update:t.passTracks,error:t.handleAxiosError}}),t.user.loggedIn?e("tracks",{directives:[{name:"show",rawName:"v-show",value:t.isCurrentPanel(2)||t.isCurrentPanel(3),expression:"isCurrentPanel(2) || isCurrentPanel(3)"}],ref:"tracks",attrs:{user:t.user,"show-favs":t.showFavs,"current-id":t.currentTrack},on:{tracks:t.updateCounts,update:t.passTracks,error:t.handleAxiosError}}):t._e(),e("button",{staticClass:"btn btn-primary",attrs:{id:"btn-scroll",title:t.nearTop?"Scroll to bottom":"Scroll to top"},on:{click:t.scroll}},[e("font-awesome-icon",{attrs:{icon:t.nearTop?"chevron-down":"chevron-up","aria-hidden":"true"}})],1),t.user.loggedIn?e("resume",{attrs:{"is-visible":t.showResume,user:t.user}}):t._e(),e("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),e("error",{ref:"errorModal",attrs:{error:t.errorMessage}}),e("div",{attrs:{id:"bottom"}})],1)},de=[];const he={data(){return{trackData:{},currentPanel:1,user:{},numTracks:{all:0,favorites:0},savedIDs:[],isLoading:!1,nearTop:!0,errorMessage:{},darkMode:!1}},computed:{showFavs(){return this.isCurrentPanel(3)},currentTrack(){if(!!this.trackData)return this.trackData.id},showResume(){return this.currentTrack!=this.user.resumeTrack&&this.nearTop}},components:{navbar:ot,urlInput:ft,navpills:gt,description:Rt,tracks:Kt,resume:Yt,loading:re,error:ce},methods:{updateData(t){this.trackData=t;const a=t.id?`/${t.id}`:"/";a!==this.$router.currentRoute.path&&this.$router.replace(a),this.updatePanel(1)},updatePanel(t){this.currentPanel=t},isCurrentPanel(t){return this.currentPanel==t},checkLogin(){this.axios("/auth/verify",{credentials:"same-origin"}).then(t=>this.user=t.data).then(()=>this.handleRoute()).catch(()=>this.user.loggedIn=!1)},updateCounts(t,a,e){this.numTracks.all=t,this.numTracks.favorites=a,this.savedIDs=e},passTracks(t){this.$refs.tracks.receiveTracks(t)},scroll(){const t=this.nearTop?"bottom":"top";document.getElementById(t).scrollIntoView(!0)},handleSCError(t){t.response?t.response.status===403?this.updateData({error:"The information for this track is not available"}):this.updateData({error:"Invalid URL, please try again"}):this.updateData({error:"Error loading track info, check your connection!"})},handleAxiosError(t,a){this.checkLogin(),this.errorMessage={title:t,message:a.response.data.message},this.$refs.errorModal.showModal()},updateResumeTrack(){if(!this.user.loggedIn)return;const t={currentTrack:this.currentTrack};this.axios.post(`/api/${this.user.username}/current`,t,{credentials:"same-origin"}).catch(()=>this.checkLogin())},handleScroll(){this.nearTop!==document.scrollingElement.scrollTop<200&&(this.nearTop=Boolean(document.scrollingElement.scrollTop<200))},checkDarkMode(){const t=localStorage.getItem("darkMode");this.darkMode=t==="true",t===null&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(this.darkMode=!0)},toggleDarkMode(){this.darkMode=!this.darkMode,localStorage.setItem("darkMode",this.darkMode)},randomTrack(){const t=Math.floor(Math.random()*this.savedIDs.length);this.$router.push(this.savedIDs[t])},handleRoute(){const t=this.$route.path.substring(1).trim();if(isNaN(t)&&!t.includes("soundcloud")||t==""||t==this.currentTrack)return;let a="https://api.soundcloud.com/";a+=t.includes("soundcloud")?`resolve.json?url=${t}`:`tracks/${t}/`,this.isLoading=!0,t.includes("soundcloud")?this.axios(`/soundcloud/resolve?url=${t}`).then(e=>this.updateData(e.data)).then(()=>this.updateResumeTrack()).catch(e=>this.handleSCError(e)).finally(()=>this.isLoading=!1):this.user.token?this.axios(a,{headers:{Authorization:`Bearer ${this.user.token}`}}).then(e=>this.updateData(e.data)).then(()=>this.updateResumeTrack()).catch(e=>this.handleSCError(e)).finally(()=>this.isLoading=!1):window.setTimeout(()=>{this.axios(a,{headers:{Authorization:`Bearer ${this.user.token}`}}).then(e=>this.updateData(e.data)).then(()=>this.updateResumeTrack()).catch(e=>this.handleSCError(e)).finally(()=>this.isLoading=!1)},1e3)}},mounted(){this.checkLogin(),this.checkDarkMode()},created(){window.addEventListener("scroll",this.handleScroll)},destroyed(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route:{immediate:!1,handler(){this.handleRoute()}},currentPanel:function(t){(t==2||t==3)&&window.setTimeout(()=>this.$refs.tracks.scrollToId(this.currentTrack),400)}}},T={};var fe=o(he,ue,de,!1,me,null,null,null);function me(t){for(let a in T)this[a]=T[a]}var y=function(){return fe.exports}();d.use(R,P);d.use(A);d.use(E);d.use(L);d.component("font-awesome-icon",F);U.add(J.faUser,O.faCog,j.faTimes,V.faPencilAlt,H.faCheck,K.faStar,z.faSearch,q.faChevronUp,B.faChevronDown,G.faStream,W.faMusic,X.faMoon,Y.faDice,Z.faStar,Q.faSoundcloud);d.filter("date",t=>{if(!t)return"";const a=new Date(t);return new Intl.DateTimeFormat([],{dateStyle:"long"}).format(a)});d.use(m);const ve=new m({routes:[{path:"/:track",component:y}]});new d({el:"#new-tracks",render:t=>t(y),router:ve});
//# sourceMappingURL=index.4842d8c3.js.map
